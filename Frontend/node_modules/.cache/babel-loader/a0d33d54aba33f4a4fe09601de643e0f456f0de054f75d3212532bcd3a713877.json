{"ast":null,"code":"var _jsxFileName = \"F:\\\\Greenwich\\\\Greenwich\\\\Topup\\\\Final\\\\Social media final project\\\\Frontend\\\\src\\\\page\\\\register\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { AuthContext } from \"../../contexts/authContext\";\nimport { apiUrl, LOCAL_STORAGE_TOKEN_NAME } from \"../../contexts/constants\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n  // Context\n  const {\n    loadUser\n  } = useContext(AuthContext);\n\n  // local state\n  const [register, setRegister] = useState({\n    userEmail: \"\",\n    userPassword: \"\",\n    confirmPassword: \"\",\n    userName: \"\",\n    userAvatar: \"\"\n  });\n\n  //Router\n  const history = useHistory();\n\n  // get data as user input\n  const onChangeRegisterForm = function (event) {\n    setRegister({\n      ...register,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  //get file as user input\n  const onChangeFileUserForm = function (event) {\n    setRegister({\n      ...register,\n      userAvatar: event.target.files[0]\n    });\n    // console.log(event.target.files[0]);\n  };\n\n  // handle submit event in form with axios\n  const userRegister = e => {\n    e.preventDefault();\n\n    // initialize formdata to store values in state and assign those values to name in input\n    const formData = new FormData();\n    formData.append(\"userEmail\", register.userEmail);\n    formData.append(\"userPassword\", register.userPassword);\n    formData.append(\"confirmPassword\", register.confirmPassword);\n    formData.append(\"userName\", register.userName);\n    formData.append(\"userAvatar\", register.userAvatar);\n    axios.post(`${apiUrl}/auth/register`, formData).then(response => {\n      console.log(response.data);\n      if (response.data.success) {\n        localStorage.setItem(LOCAL_STORAGE_TOKEN_NAME, response.data.accessToken);\n        history.push(\"/login\");\n        loadUser();\n        return response;\n      }\n      if (!response.success) {\n        alert(response.data.message);\n      }\n    }).catch(error => {\n      if (error.response) return error.response;else return {\n        success: false,\n        message: error.message\n      };\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"l-form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: userRegister,\n        enctype: \"multipart/form-data\",\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/img/logo1.svg\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"form__title\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form__input\",\n            placeholder: \" \",\n            name: \"userEmail\",\n            value: register.userEmail,\n            required: true,\n            onChange: onChangeRegisterForm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: true,\n            className: \"form__label\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form__input\",\n            placeholder: \" \",\n            name: \"userPassword\",\n            value: register.userPassword,\n            required: true,\n            onChange: onChangeRegisterForm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: true,\n            className: \"form__label\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form__input\",\n            placeholder: \" \",\n            name: \"confirmPassword\",\n            value: register.confirmPassword,\n            required: true,\n            onChange: onChangeRegisterForm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: true,\n            className: \"form__label\",\n            children: \"Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form__input\",\n            placeholder: \" \",\n            name: \"userName\",\n            value: register.userName,\n            required: true,\n            onChange: onChangeRegisterForm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: true,\n            className: \"form__label\",\n            children: \"Your name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            className: \"form__input\",\n            onChange: onChangeFileUserForm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: true,\n            className: \"form__label\",\n            children: \"Your avartar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          id: \"return\",\n          children: \"Return login page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          className: \"form__button\",\n          defaultValue: \"Sign In\",\n          value: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"K8X3Wa0HdZ3i8vX603rPs8D+T8A=\", false, function () {\n  return [useHistory];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["axios","React","useContext","useState","useHistory","AuthContext","apiUrl","LOCAL_STORAGE_TOKEN_NAME","Link","Register","loadUser","register","setRegister","userEmail","userPassword","confirmPassword","userName","userAvatar","history","onChangeRegisterForm","event","target","name","value","onChangeFileUserForm","files","userRegister","e","preventDefault","formData","FormData","append","post","then","response","console","log","data","success","localStorage","setItem","accessToken","push","alert","message","catch","error"],"sources":["F:/Greenwich/Greenwich/Topup/Final/Social media final project/Frontend/src/page/register/index.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { AuthContext } from \"../../contexts/authContext\";\r\nimport { apiUrl, LOCAL_STORAGE_TOKEN_NAME } from \"../../contexts/constants\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Register() {\r\n  // Context\r\n  const { loadUser } = useContext(AuthContext);\r\n\r\n  // local state\r\n  const [register, setRegister] = useState({\r\n    userEmail: \"\",\r\n    userPassword: \"\",\r\n    confirmPassword: \"\",\r\n    userName: \"\",\r\n    userAvatar: \"\",\r\n  });\r\n\r\n  //Router\r\n  const history = useHistory();\r\n\r\n  // get data as user input\r\n  const onChangeRegisterForm = function (event) {\r\n    setRegister({ ...register, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  //get file as user input\r\n  const onChangeFileUserForm = function (event) {\r\n    setRegister({ ...register, userAvatar: event.target.files[0] });\r\n    // console.log(event.target.files[0]);\r\n  };\r\n\r\n  // handle submit event in form with axios\r\n  const userRegister = (e) => {\r\n    e.preventDefault();\r\n\r\n    // initialize formdata to store values in state and assign those values to name in input\r\n    const formData = new FormData();\r\n    formData.append(\"userEmail\", register.userEmail);\r\n    formData.append(\"userPassword\", register.userPassword);\r\n    formData.append(\"confirmPassword\", register.confirmPassword);\r\n    formData.append(\"userName\", register.userName);\r\n    formData.append(\"userAvatar\", register.userAvatar);\r\n\r\n    axios\r\n      .post(`${apiUrl}/auth/register`, formData)\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        if (response.data.success) {\r\n          localStorage.setItem(\r\n            LOCAL_STORAGE_TOKEN_NAME,\r\n            response.data.accessToken\r\n          );\r\n          history.push(\"/login\");\r\n          loadUser();\r\n          return response;\r\n        }\r\n        if (!response.success) {\r\n          alert(response.data.message);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) return error.response;\r\n        else return { success: false, message: error.message };\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <div className=\"l-form\">\r\n        <form\r\n          onSubmit={userRegister}\r\n          enctype=\"multipart/form-data\"\r\n          className=\"form\"\r\n        >\r\n          <img src=\"/img/logo1.svg\" alt=\"\" />\r\n          <h2 className=\"form__title\">Register</h2>\r\n          <div className=\"form__div\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form__input\"\r\n              placeholder=\" \"\r\n              name=\"userEmail\"\r\n              value={register.userEmail}\r\n              required\r\n              onChange={onChangeRegisterForm}\r\n            />\r\n            <label htmlFor className=\"form__label\">\r\n              Email\r\n            </label>\r\n          </div>\r\n          <div className=\"form__div\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form__input\"\r\n              placeholder=\" \"\r\n              name=\"userPassword\"\r\n              value={register.userPassword}\r\n              required\r\n              onChange={onChangeRegisterForm}\r\n            />\r\n            <label htmlFor className=\"form__label\">\r\n              Password\r\n            </label>\r\n          </div>\r\n          <div className=\"form__div\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form__input\"\r\n              placeholder=\" \"\r\n              name=\"confirmPassword\"\r\n              value={register.confirmPassword}\r\n              required\r\n              onChange={onChangeRegisterForm}\r\n            />\r\n            <label htmlFor className=\"form__label\">\r\n              Confirm Password\r\n            </label>\r\n          </div>\r\n          <div className=\"form__div\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form__input\"\r\n              placeholder=\" \"\r\n              name=\"userName\"\r\n              value={register.userName}\r\n              required\r\n              onChange={onChangeRegisterForm}\r\n            />\r\n            <label htmlFor className=\"form__label\">\r\n              Your name\r\n            </label>\r\n          </div>\r\n          <div className=\"form__div\">\r\n            <input\r\n              type=\"file\"\r\n              className=\"form__input\"\r\n              onChange={onChangeFileUserForm}\r\n            />\r\n            <label htmlFor className=\"form__label\">\r\n              Your avartar\r\n            </label>\r\n          </div>\r\n          <Link to=\"/login\" id=\"return\">\r\n            Return login page\r\n          </Link>\r\n          <input\r\n            type=\"submit\"\r\n            className=\"form__button\"\r\n            defaultValue=\"Sign In\"\r\n            value=\"Register\"\r\n          />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}