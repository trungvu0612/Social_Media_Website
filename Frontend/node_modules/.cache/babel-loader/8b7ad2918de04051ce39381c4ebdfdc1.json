{"ast":null,"code":"var _jsxFileName = \"F:\\\\Greenwich\\\\Greenwich\\\\Topup\\\\Final\\\\Social media final project\\\\Frontend\\\\src\\\\page\\\\admin\\\\component\\\\categorymusic\\\\listMusicAdmin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { apiUploadFileMp3, apiUploadImgMp3 } from \"../../../../contexts/constants\";\nimport { apiUrl, UPDATE_MUSIC } from \"../../../../contexts/constants\";\nimport { MusicContext } from \"../../../../contexts/musicContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ListMusicAdmin({\n  music: {\n    _id,\n    musicName,\n    musicAuthor,\n    musicImg,\n    musicFile\n  }\n}) {\n  _s();\n\n  function editMussic(musicId) {\n    const popUpEdit = document.querySelector(\".edit-popup\");\n    popUpEdit.classList.add(\"active\");\n  } // close popup\n\n\n  function outPopupMusic(musicId) {\n    const popUpEdit = document.querySelector(\".edit-popup\");\n    popUpEdit.classList.remove(\"active\");\n  }\n\n  const {\n    dispatch,\n    findIDMusic\n  } = useContext(MusicContext); // local state\n\n  const [updateMusic, setupdateMusic] = useState({\n    musicName: \"\",\n    musicAuthor: \"\",\n    musicImg: \"\",\n    musicFile: \"\",\n    musicCategory: \"\"\n  }); // get data as user input\n\n  const onChangeMusicForm = function (event) {\n    setupdateMusic({ ...updateMusic,\n      [event.target.name]: event.target.value\n    });\n  }; //get img file as user input\n\n\n  const onChangeFileImgForm = function (event) {\n    setupdateMusic({ ...updateMusic,\n      musicImg: event.target.files[0]\n    });\n  }; //get mp3 file as user input\n\n\n  const onChangeMp3Form = function (event) {\n    setupdateMusic({ ...updateMusic,\n      musicFile: event.target.files[0]\n    });\n  };\n\n  const currentIdmusic = function (musicId) {\n    findIDMusic(musicId);\n    const currentIdmusic = musicId;\n  };\n\n  const onSubmitUpdate = function (e) {\n    e.preventDefault();\n    console.log(currentIdmusic); // initialize formdata to store values in state and assign those values to name in input\n\n    const formData = new FormData();\n    formData.append(\"musicName\", updateMusic.musicName);\n    formData.append(\"musicAuthor\", updateMusic.musicAuthor);\n    formData.append(\"musicImg\", updateMusic.musicImg);\n    formData.append(\"musicFile\", updateMusic.musicFile);\n    formData.append(\"musicCategory\", updateMusic.musicCategory);\n    axios.put(`${apiUrl}/music/update/${currentIdmusic}`, formData).then(response => {\n      if (response.data.success) {\n        dispatch({\n          type: UPDATE_MUSIC,\n          payload: response.data.music\n        });\n        return response.data;\n      }\n    }).catch(error => {\n      return error.response ? error.response : {\n        success: false,\n        message: \"Server error\"\n      };\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"like\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"img\",\n      src: `${apiUploadImgMp3}${musicImg}`,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"name\",\n      children: musicName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"author\",\n      children: musicAuthor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      className: \"audio\",\n      src: `${apiUploadFileMp3}${musicFile}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"item-create edit\",\n      onClick: editMussic,\n      children: \"Edit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ListMusicAdmin, \"b/lIRImt8gZW3d2qICFCxi7ogp0=\");\n\n_c = ListMusicAdmin;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListMusicAdmin\");","map":{"version":3,"sources":["F:/Greenwich/Greenwich/Topup/Final/Social media final project/Frontend/src/page/admin/component/categorymusic/listMusicAdmin.jsx"],"names":["React","useContext","useState","apiUploadFileMp3","apiUploadImgMp3","apiUrl","UPDATE_MUSIC","MusicContext","axios","ListMusicAdmin","music","_id","musicName","musicAuthor","musicImg","musicFile","editMussic","musicId","popUpEdit","document","querySelector","classList","add","outPopupMusic","remove","dispatch","findIDMusic","updateMusic","setupdateMusic","musicCategory","onChangeMusicForm","event","target","name","value","onChangeFileImgForm","files","onChangeMp3Form","currentIdmusic","onSubmitUpdate","e","preventDefault","console","log","formData","FormData","append","put","then","response","data","success","type","payload","catch","error","message"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport {\r\n  apiUploadFileMp3,\r\n  apiUploadImgMp3,\r\n} from \"../../../../contexts/constants\";\r\nimport { apiUrl, UPDATE_MUSIC } from \"../../../../contexts/constants\";\r\nimport { MusicContext } from \"../../../../contexts/musicContext\";\r\nimport axios from \"axios\";\r\n\r\nexport default function ListMusicAdmin({\r\n  music: { _id, musicName, musicAuthor, musicImg, musicFile },\r\n}) {\r\n  function editMussic(musicId) {\r\n    const popUpEdit = document.querySelector(\".edit-popup\");\r\n    popUpEdit.classList.add(\"active\");\r\n  }\r\n\r\n  // close popup\r\n  function outPopupMusic(musicId) {\r\n    const popUpEdit = document.querySelector(\".edit-popup\");\r\n    popUpEdit.classList.remove(\"active\");\r\n  }\r\n\r\n  const { dispatch, findIDMusic } = useContext(MusicContext);\r\n\r\n  // local state\r\n  const [updateMusic, setupdateMusic] = useState({\r\n    musicName: \"\",\r\n    musicAuthor: \"\",\r\n    musicImg: \"\",\r\n    musicFile: \"\",\r\n    musicCategory: \"\",\r\n  });\r\n\r\n  // get data as user input\r\n  const onChangeMusicForm = function (event) {\r\n    setupdateMusic({ ...updateMusic, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  //get img file as user input\r\n  const onChangeFileImgForm = function (event) {\r\n    setupdateMusic({ ...updateMusic, musicImg: event.target.files[0] });\r\n  };\r\n\r\n  //get mp3 file as user input\r\n  const onChangeMp3Form = function (event) {\r\n    setupdateMusic({ ...updateMusic, musicFile: event.target.files[0] });\r\n  };\r\n\r\n  const currentIdmusic = function (musicId) {\r\n    findIDMusic(musicId);\r\n    const currentIdmusic = musicId;\r\n  };\r\n\r\n  const onSubmitUpdate = function (e) {\r\n    e.preventDefault();\r\n    console.log(currentIdmusic);\r\n\r\n    // initialize formdata to store values in state and assign those values to name in input\r\n    const formData = new FormData();\r\n    formData.append(\"musicName\", updateMusic.musicName);\r\n    formData.append(\"musicAuthor\", updateMusic.musicAuthor);\r\n    formData.append(\"musicImg\", updateMusic.musicImg);\r\n    formData.append(\"musicFile\", updateMusic.musicFile);\r\n    formData.append(\"musicCategory\", updateMusic.musicCategory);\r\n\r\n    axios\r\n      .put(`${apiUrl}/music/update/${currentIdmusic}`, formData)\r\n      .then((response) => {\r\n        if (response.data.success) {\r\n          dispatch({ type: UPDATE_MUSIC, payload: response.data.music });\r\n          return response.data;\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        return error.response\r\n          ? error.response\r\n          : { success: false, message: \"Server error\" };\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"like\">\r\n      <img className=\"img\" src={`${apiUploadImgMp3}${musicImg}`} alt=\"\" />\r\n      <h5 className=\"name\">{musicName}</h5>\r\n      <h5 className=\"author\">{musicAuthor}</h5>\r\n      <audio className=\"audio\" src={`${apiUploadFileMp3}${musicFile}`} />\r\n      <button className=\"item-create edit\" onClick={editMussic}>\r\n        Edit\r\n      </button>\r\n      {/* <div className=\"edit-popup\">\r\n        <div className=\"post__items\">\r\n          <div id=\"outbtn\" onClick={outPopupMusic}>\r\n            X\r\n          </div>\r\n          <h3 className=\"title\">Update music</h3>\r\n          <div className=\"left-right\">\r\n            <div className=\"left\">\r\n              <div className=\"left__items\">\r\n                <h4>Name Music</h4>\r\n              </div>\r\n              <div className=\"left__items\">\r\n                <h4>Image</h4>\r\n              </div>\r\n              <div className=\"left__items\">\r\n                <h4>Author</h4>\r\n              </div>\r\n              <div className=\"left__items\">\r\n                <h4>Link</h4>\r\n              </div>\r\n              <div className=\"left__items\">\r\n                <h4>Category</h4>\r\n              </div>\r\n            </div>\r\n            <form onSubmit={onSubmitUpdate} enctype=\"multipart/form-data\">\r\n              <div className=\"right\">\r\n                <div className=\"right__items\">\r\n                  <input\r\n                    className=\"input_info\"\r\n                    type=\"text\"\r\n                    placeholder=\"enter name's music\"\r\n                    name=\"musicName\"\r\n                    value={updateMusic.musicName}\r\n                    onChange={onChangeMusicForm}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"right__items\">\r\n                  <input type=\"file\" onChange={onChangeFileImgForm} required />\r\n                </div>\r\n                <div className=\"right__items\">\r\n                  <input\r\n                    className=\"input_info\"\r\n                    type=\"text\"\r\n                    placeholder=\"enter author's music\"\r\n                    name=\"musicAuthor\"\r\n                    value={updateMusic.musicAuthor}\r\n                    onChange={onChangeMusicForm}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"right__items\">\r\n                  <input type=\"file\" onChange={onChangeMp3Form} required />\r\n                </div>\r\n                <div className=\"right__items checkbox\">\r\n                  <div className=\"checkbox\">\r\n                    <select\r\n                      name=\"musicCategory\"\r\n                      onChange={onChangeMusicForm}\r\n                      required\r\n                    >\r\n                      <option>choose music genre</option>\r\n                      <option value=\"acoustic\">acoustic</option>\r\n                      <option value=\"cinematic\">cinematic</option>\r\n                      <option value=\"edm\">edm</option>\r\n                      <option value=\"electronic\">electronic</option>\r\n                      <option value=\"pop\">pop</option>\r\n                      <option value=\"jazz\">jazz</option>\r\n                      <option value=\"urban\">urban</option>\r\n                      <option value=\"rock\">rock</option>\r\n                      <option value=\"other\">other</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"submit\">\r\n                  <input\r\n                    type=\"submit\"\r\n                    className=\"submit__btn\"\r\n                    value=\"Save\"\r\n                    defaultValue=\"Upload\"\r\n                    onClick={currentIdmusic}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div> */}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}