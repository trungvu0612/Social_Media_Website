<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Grunt CFD</title>
    <link rel="icon" href="favicon.ico">
    <meta name="title" content="" />
    <meta name="description" content="" />
    <!-- meta facebook -->
    <meta property="og:locale" content="vi" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Trang chủ" />
    <meta property="og:description" content="" />
    <meta property="og:url" content="" />
    <meta property="og:site_name" content="" />
    <meta property="og:image" content="" />

    <link rel="stylesheet" href="dest/style.min.css">
    <link rel="stylesheet" href="dest/fonts.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
</head>

<body class="home">
    <header>
        <div class="container-fluid">
            <div class="logo">
                <a href=""><img src="/img/logo1.svg" alt=""></a>
            </div>
            <div class="search">
                <i class="search-icon fa fa-search"></i>
                <input type="text" inputmode="search" placeholder="Search for song, arties etc..." class="search-input" />
            </div>
            <div class="right">
                <a href="#"><i class="fa fa-bell tool-icon"></i></a>
                <a href="#" class="btn1">Log out</a>
            </div>
        </div>
    </header>

    <main>
        <div class="container-fluid">
            <section class="menu">
                <div class="menu__user">
                    <img src="/img/avartar.jpg" alt="" class="menu__user-avatar">
                    <h2 class="menu__user-name">
                        Trung Vũ
                    </h2>
                    <span class="menu__user-email">
                        Trungvu027@gmail.com
                    </span>
                </div>
                <ul class="menu__list">
                    <a href="#" class="menu__list-item">
                        <li>
                            <i class="fa fa-user-circle-o"></i><span>My profile</span>
                        </li>
                    </a>
                    <a href="#" class="menu__list-item">
                        <li>
                            <i class="fa fa-line-chart"></i><span>Music charts</span>
                        </li>
                    </a>
                    <a href="#" class="menu__list-item">
                        <li>
                            <i class="fa fa-home menu-icon"></i><span>My profile</span>
                        </li>
                    </a>
                </ul>
            </section>

            <section class="main">
                <div class="main__post">
                    <div class="main__post-owner">
                        <img src="/img/avartar.jpg" alt="">
                        <a href="#">Trung Vũ</a>
                    </div>
                    <div class="main__post-content">
                        <span class="post">
                            Hãy nhớ rằng, đó không phải là nội dung của bạn. Nó thậm chí không phải là nội dung của SoundCloud. Tất cả âm thanh, văn bản, hình ảnh, nhận xét và dữ liệu hoặc thông tin khác được liên kết với tài khoản người dùng trên nền tảng SoundCloud ® ("Nội dung người dùng") thuộc quyền sở hữu của người dùng SoundCloud ® đã tạo hoặc tải lên nó ("Người tải lên") và bạn phải tôn trọng quyền của họ mọi lúc. Việc sử dụng sai Nội dung của Người dùng có thể cấu thành vi phạm bản quyền và dẫn đến việc Người tải lên hoặc chủ sở hữu bản quyền khác sẽ thực hiện hành động chống lại bạn.
                        </span>
                    </div>
                    <div class="main__post-like" data-index="0">
                        <img src="/img/img_music/2.jpg" class="img" alt="">
                        <h4 class="name">EDM</h4>
                        <h4 class="author">Chưa biết tên</h4>
                        <time class="time">2:46</time>
                        <a href="#"><i class="fa fa-heart"></i></a>
                    </div>
                    <div class="main__post-comment">

                    </div>
                </div>
                <div class="main__post">
                    <div class="main__post-owner">
                        <img src="/img/avartar.jpg" alt="">
                        <a href="#">Trung Vũ</a>
                    </div>
                    <div class="main__post-content">
                        <span class="post">
                            Hãy nhớ rằng, đó không phải là nội dung của bạn. Nó thậm chí không phải là nội dung của SoundCloud. Tất cả âm thanh, văn bản, hình ảnh, nhận xét và dữ liệu hoặc thông tin khác được liên kết với tài khoản người dùng trên nền tảng SoundCloud ® ("Nội dung người dùng") thuộc quyền sở hữu của người dùng SoundCloud ® đã tạo hoặc tải lên nó ("Người tải lên") và bạn phải tôn trọng quyền của họ mọi lúc. Việc sử dụng sai Nội dung của Người dùng có thể cấu thành vi phạm bản quyền và dẫn đến việc Người tải lên hoặc chủ sở hữu bản quyền khác sẽ thực hiện hành động chống lại bạn.
                        </span>
                    </div>
                    <div class="main__post-like" data-index="1">
                        <img src="/img/img_music/2.jpg" class="img" alt="">
                        <h4 class="name">EDM</h4>
                        <h4 class="author">Chưa biết tên</h4>
                        <time class="time">2:46</time>
                        <a href="#"><i class="fa fa-heart"></i></a>
                    </div>
                    <div class="main__post-comment">
                        <audio src="/music/edm.mp3" class="progress__song"></audio>
                    </div>
                </div>
                <div class="main__post">
                    <div class="main__post-owner">
                        <img src="/img/avartar.jpg" alt="">
                        <a href="#">Trung Vũ</a>
                    </div>
                    <div class="main__post-content">
                        <span class="post">
                            Hãy nhớ rằng, đó không phải là nội dung của bạn. Nó thậm chí không phải là nội dung của SoundCloud. Tất cả âm thanh, văn bản, hình ảnh, nhận xét và dữ liệu hoặc thông tin khác được liên kết với tài khoản người dùng trên nền tảng SoundCloud ® ("Nội dung người dùng") thuộc quyền sở hữu của người dùng SoundCloud ® đã tạo hoặc tải lên nó ("Người tải lên") và bạn phải tôn trọng quyền của họ mọi lúc. Việc sử dụng sai Nội dung của Người dùng có thể cấu thành vi phạm bản quyền và dẫn đến việc Người tải lên hoặc chủ sở hữu bản quyền khác sẽ thực hiện hành động chống lại bạn.
                        </span>
                    </div>
                    <div class="main__post-like" data-index="2">
                        <img src="/img/img_music/2.jpg" class="img" alt="">
                        <h4 class="name">EDM</h4>
                        <h4 class="author">Chưa biết tên</h4>
                        <time class="time">2:46</time>
                        <a href="#"><i class="fa fa-heart"></i></a>
                    </div>
                    <div class="main__post-comment">
                        <audio src="/music/edm.mp3" class="progress__song"></audio>
                    </div>
                </div>
                <div class="main__post">
                    <div class="main__post-owner">
                        <img src="/img/avartar.jpg" alt="">
                        <a href="#">Trung Vũ</a>
                    </div>
                    <div class="main__post-content">
                        <span class="post">
                            Hãy nhớ rằng, đó không phải là nội dung của bạn. Nó thậm chí không phải là nội dung của SoundCloud. Tất cả âm thanh, văn bản, hình ảnh, nhận xét và dữ liệu hoặc thông tin khác được liên kết với tài khoản người dùng trên nền tảng SoundCloud ® ("Nội dung người dùng") thuộc quyền sở hữu của người dùng SoundCloud ® đã tạo hoặc tải lên nó ("Người tải lên") và bạn phải tôn trọng quyền của họ mọi lúc. Việc sử dụng sai Nội dung của Người dùng có thể cấu thành vi phạm bản quyền và dẫn đến việc Người tải lên hoặc chủ sở hữu bản quyền khác sẽ thực hiện hành động chống lại bạn.
                        </span>
                    </div>
                    <div class="main__post-like">
                        <img src="/img/img_music/2.jpg" class="img" alt="">
                        <h4 class="name">EDM</h4>
                        <h4 class="author">Chưa biết tên</h4>
                        <time class="time">2:46</time>
                        <a href="#"><i class="fa fa-heart"></i></a>
                    </div>
                    <div class="main__post-comment">
                        <audio src="/music/edm.mp3" class="progress__song"></audio>
                    </div>
                </div>
                <div class="main__post">
                    <div class="main__post-owner">
                        <img src="/img/avartar.jpg" alt="">
                        <a href="#">Trung Vũ</a>
                    </div>
                    <div class="main__post-content">
                        <span class="post">
                            Hãy nhớ rằng, đó không phải là nội dung của bạn. Nó thậm chí không phải là nội dung của SoundCloud. Tất cả âm thanh, văn bản, hình ảnh, nhận xét và dữ liệu hoặc thông tin khác được liên kết với tài khoản người dùng trên nền tảng SoundCloud ® ("Nội dung người dùng") thuộc quyền sở hữu của người dùng SoundCloud ® đã tạo hoặc tải lên nó ("Người tải lên") và bạn phải tôn trọng quyền của họ mọi lúc. Việc sử dụng sai Nội dung của Người dùng có thể cấu thành vi phạm bản quyền và dẫn đến việc Người tải lên hoặc chủ sở hữu bản quyền khác sẽ thực hiện hành động chống lại bạn.
                        </span>
                    </div>
                    <div class="main__post-like">
                        <img src="/img/img_music/2.jpg" class="img" alt="">
                        <h4 class="name">EDM</h4>
                        <h4 class="author">Chưa biết tên</h4>
                        <time class="time">2:46</time>
                        <a href="#"><i class="fa fa-heart"></i></a>
                    </div>
                    <div class="main__post-comment">
                        <audio src="/music/edm.mp3" class="progress__song"></audio>
                    </div>
                </div>
                <div class="main__post">
                    <div class="main__post-owner">
                        <img src="/img/avartar.jpg" alt="">
                        <a href="#">Trung Vũ</a>
                    </div>
                    <div class="main__post-content">
                        <span class="post">
                            Hãy nhớ rằng, đó không phải là nội dung của bạn. Nó thậm chí không phải là nội dung của SoundCloud. Tất cả âm thanh, văn bản, hình ảnh, nhận xét và dữ liệu hoặc thông tin khác được liên kết với tài khoản người dùng trên nền tảng SoundCloud ® ("Nội dung người dùng") thuộc quyền sở hữu của người dùng SoundCloud ® đã tạo hoặc tải lên nó ("Người tải lên") và bạn phải tôn trọng quyền của họ mọi lúc. Việc sử dụng sai Nội dung của Người dùng có thể cấu thành vi phạm bản quyền và dẫn đến việc Người tải lên hoặc chủ sở hữu bản quyền khác sẽ thực hiện hành động chống lại bạn.
                        </span>
                    </div>
                    <div class="main__post-like">
                        <img src="/img/img_music/2.jpg" class="img" alt="">
                        <h4 class="name">EDM</h4>
                        <h4 class="author">Chưa biết tên</h4>
                        <time class="time">2:46</time>
                        <a href="#"><i class="fa fa-heart"></i></a>
                    </div>
                    <div class="main__post-comment">
                    </div>
                </div>
                <div class="main__post">
                    <div class="main__post-owner">
                        <img src="/img/avartar.jpg" alt="">
                        <a href="#">Trung Vũ</a>
                    </div>
                    <div class="main__post-content">
                        <span class="post">
                            Hãy nhớ rằng, đó không phải là nội dung của bạn. Nó thậm chí không phải là nội dung của SoundCloud. Tất cả âm thanh, văn bản, hình ảnh, nhận xét và dữ liệu hoặc thông tin khác được liên kết với tài khoản người dùng trên nền tảng SoundCloud ® ("Nội dung người dùng") thuộc quyền sở hữu của người dùng SoundCloud ® đã tạo hoặc tải lên nó ("Người tải lên") và bạn phải tôn trọng quyền của họ mọi lúc. Việc sử dụng sai Nội dung của Người dùng có thể cấu thành vi phạm bản quyền và dẫn đến việc Người tải lên hoặc chủ sở hữu bản quyền khác sẽ thực hiện hành động chống lại bạn.
                        </span>
                    </div>
                    <div class="main__post-like">
                        <img src="/img/img_music/2.jpg" class="img" alt="">
                        <h4 class="name">EDM</h4>
                        <h4 class="author">Chưa biết tên</h4>
                        <time class="time">2:46</time>
                        <a href="#"><i class="fa fa-heart"></i></a>
                    </div>
                    <div class="main__post-comment">

                    </div>
                </div>
            </section>

            <section class="music">
                <div class="music__title">
                    <h4>
                        Music is playing
                    </h4>
                </div>
                <div class="music__audio">
                    <div class="music__audio-postcard">
                        <div class="player"><img src="/img/img_music/2.jpg" class="player__img" alt=""></div>
                        <h4 class="player-title tilte">EDM</h4>
                        <span class="player-author author">Trung Vũ</span>
                        <div class="progress">
                            <input id="progress__input" type="range" value="0" step="1" min="0" max="100">
                            <audio src="/music/spark.mp3" class="progress__song"></audio>
                        </div>

                    </div>
                    <div class="music__audio-btn">
                        <i class="fa fa-backward player-prev"></i>
                        <i class="fa fa-play player-play"></i>
                        <i class="fa fa-forward player-next"></i>
                    </div>
                </div>
            </section>
        </div>

    </main>
</body>

<script>
    // -- Play music__Home Page

    // let playing = true;
    // let random = false;
    // const playButton = document.querySelector(".player-play");
    // const nextButton = document.querySelector(".player-next");
    // const prevButton = document.querySelector(".player-prev");
    // const thumbnail = document.querySelector(".player-img");
    // const song = document.querySelector(".project__song");
    // const songList = document.querySelectorAll(".main__post-like");
    // const songArtist = document.querySelector(".player-author");
    // const songTitle = document.querySelector(".player-title");
    // const progressBar = document.querySelector("#progress-input");

    // songList.forEach(function(e, a) {
    //     // console.log(a);
    // })

    // let songIndex = 0;
    // let songs = [
    //     "/music/edm.mp3",
    //     "/music/spark.mp3"
    // ];
    // let thumbnails = [
    //     "/img/img_music/1.jpg",
    //     "/img/img_music/2.jpg"
    // ];
    // let songArtists = ["EDM", "Spark"];
    // let songTitles = ["Ampyx Holo", "Ampyx Home"];
    // let timer;

    // function handleClickEachSong(e) {
    //     const index = parseInt(e.target.dataset.index);
    //     nextSong(index);
    // }

    // function playPause() {
    //     if (playing) {
    //         const song = document.querySelector("#song");
    //         song.play();
    //         thumbnail.classList.add("is-playing");
    //         playButton.classList.add("fa-pause");

    //         playing = false;
    //     } else {
    //         thumbnail.classList.remove("is-playing");
    //         playButton.classList.remove("fa-pause");
    //         song.pause();
    //         playing = true;
    //         clearInterval(timer);
    //     }
    // }

    // function nextSong(index = -1) {
    //     if (index >= 0) {
    //         songIndex = index;
    //     } else {
    //         songIndex++;
    //     }
    //     if (songIndex > songs.length - 1) {
    //         songIndex = 0;
    //     }
    //     song.src = songs[songIndex];
    //     thumbnail.src = thumbnails[songIndex];

    //     songArtist.innerHTML = songArtists[songIndex];
    //     songTitle.innerHTML = songTitles[songIndex];

    //     playing = true;
    //     playPause();
    // }

    // function previousSong() {
    //     songIndex--;
    //     if (songIndex < 0) {
    //         songIndex = 1;
    //     }
    //     song.src = songs[songIndex];
    //     thumbnail.src = thumbnails[songIndex];
    //     songArtist.innerHTML = songArtists[songIndex];
    //     songTitle.innerHTML = songTitles[songIndex];

    //     playing = true;
    //     playPause();
    // }

    // // function updateProgressValue() {
    // //     progressBar.max = song.duration;
    // //     progressBar.value = song.currentTime;
    // //     document.querySelector(".player-remaining").innerHTML = formatTime(
    // //         Math.floor(song.currentTime)
    // //     );
    // //     if (document.querySelector(".player-duration").innerHTML === "NaN:NaN") {
    // //         document.querySelector(".player-duration").innerHTML = "0:00";
    // //     } else {
    // //         document.querySelector(".player-duration").innerHTML = formatTime(
    // //             Math.floor(song.duration)
    // //         );
    // //     }
    // // }

    // timer = setInterval(updateProgressValue, 500);

    // function changeProgressBar() {
    //     song.currentTime = progressBar.value;
    // }
    // progressBar.addEventListener("change", changeProgressBar);
    // playButton.addEventListener("click", playPause);
    // nextButton.addEventListener("click", nextSong);
    // prevButton.addEventListener("click", previousSong);
    // song.addEventListener("ended", function() {
    //     nextSong();
    // });

    // songList.forEach((el) => el.addEventListener("click", handleClickEachSong));


    const pause = false;
    const playList = document.querySelectorAll(".main__post-like");
    const songName = document.querySelector(".player-title");
    const songAuthor = document.querySelector(".player-author");
    const songImg = document.querySelector(".player__img");
    const songUrl = document.querySelector(".progress__song");
    const playBtn = document.querySelector(".player-play");
    const songTime = document.querySelector("#progress__input");



    const music = {
        playing: true,
        currentIndex: 0,
        // data temporary database

        defineProperties: function() {
            Object.defineProperty(this, 'currentSong', {
                get: function() {
                    return this.songs[this.currentIndex]
                }
            })
        },
        songs: [{
            id: "0",
            name: "EDM",
            author: "Chưa biết tên",
            path: "/music/edm.mp3",
            image: "/img/img_music/1.jpg",
            time: "02:30",
            like: "10",
        }, {
            id: "1",
            name: "Spark",
            author: "Chưa biết tên",
            path: "/music/spark.mp3",
            image: "/img/img_music/2.jpg",
            time: "02:30",
            like: "11",
        }, ],

        handleEvent: function() {
            // xử lý khi click nút player
            playBtn.addEventListener("click", function() {
                    if (music.playing) {
                        songUrl.play();
                    } else {
                        songUrl.pause();
                    }
                })
                // sử dụng animate web api để quay img music hay CD
            const songAnimate = songImg.animate([{
                transform: 'rotate(360deg)'
            }], {
                duration: 10000, // quay trong bao nhiêu lâu
                iterations: Infinity // quay bao nhiêu lần 
            })
            songAnimate.pause();

            // khi bài hát được chạy
            songUrl.onplay = function() {
                    // sau khi bài hát chạy thì giá trị sẽ được gán là false
                    music.playing = false;
                    playBtn.classList.add("fa-pause");
                    songAnimate.play();
                }
                // dừng bài hát 
            songUrl.onpause = function() {
                // lần click tiếp theo giá trị này đã là false thì sẽ lột vào đây và ngược lại
                music.playing = true;
                playBtn.classList.remove("fa-pause");
                songAnimate.pause();
            }

            // xử lý thanh progress chạy theo tiến độ bài nhạc 
            songUrl.ontimeupdate = function() {
                console.log(songTime.value);
                if (!!songUrl.duration) {
                    const songPercent = Math.floor(songUrl.currentTime / songUrl.duration * 100);
                    console.log(songPercent);
                    songTime.value = songPercent;
                }
            }

            // tua nhạc với hàm onchange của html dom audioend
            songTime.onchange = function(e) {
                const seekTime = songUrl.duration / 100 * e.target.value;
                songUrl.currentTime = seekTime;
            }
        },

        loadCurrentSong: function() {


            songName.innerHTML = this.currentSong.name;
            songAuthor.innerHTML = this.currentSong.author;
            songImg.src = this.currentSong.image;
            songUrl.src = this.currentSong.path;
        },


        start: function() {
            // định nghĩa thuộc tính cho object
            this.defineProperties();

            this.handleEvent();

            this.loadCurrentSong();

            this.loadCurrentSong();
        },
    };
    music.start();
</script>

</html>